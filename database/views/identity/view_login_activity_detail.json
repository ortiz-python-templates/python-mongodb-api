{
  "viewOn": "login_activity",
  "pipeline": [
    {
      "$lookup": {
        "from": "users",
        "localField": "user_id",
        "foreignField": "_id",
        "as": "user"
      }
    },
    { "$unwind": { "path": "$user", "preserveNullAndEmptyArrays": true }},
    {
      "$project": {
        "_id": 0,
        "id": "$unique_id",
        "user_id": "$user.unique_id",
        "status": 1,
        "host": 1,
        "browser": 1,
        "ip_address": 1,
        "device": 1,
        "location": 1,
        "user_agent": 1,
        "last_login: ": 1,
        "last_logout: ": 1,
        "total_login: ": 1,
        "total_logout: ": 1,
        "created_at": 1,
        "updated_at": 1,
        "is_deleted": 1,
        "user": {
            "id": "$user.id",
            "email": "$user.email",
            "first_name": "$user.first_name",
            "last_name": "$user.first_name"
        }
      }
    }
  ]
}